Acronyms:
- GHI = GitHub Issue
- DP  = Discord parity (features Discord users expect)
- MHS = Matrix homeserver
- E2EE = end-to-end encryption
- SS = screen share

Severity legend:
- P0 = crash / data loss / security / “app feels broken”
- P1 = major feature gap / big UX pain
- P2 = polish / QoL / nice-to-have

===========================================================
P0 — Data safety, encryption, and “don’t brick the app”
===========================================================

## E2EE / verification / key management (P0)
- [ ] Fix encrypted threads failing to decrypt (GHI #690) https://github.com/commetchat/commet/issues/690
  - [x] Add robust retry + fallback for thread event decryption
  - [x] Improve diagnostics (surface which session/key is missing)
  - [x] Fix thread timeline event update/removal edge cases that could break threaded timeline rendering
- [ ] Fix “can’t see encrypted message that can be seen on other apps” (GHI #388) https://github.com/commetchat/commet/issues/388
- [ ] Fix “New login session verification not working” (GHI #668) https://github.com/commetchat/commet/issues/668
- [x] Fix verification prompt not showing on first session after login (GHI #692) https://github.com/commetchat/commet/issues/692
- [x] Fix “Confirm session key button not working [WINDOWS ONLY]” (GHI #675) https://github.com/commetchat/commet/issues/675
  - [x] Handle unlock/invalid-key bootstrap states with inline recovery-key error feedback
- [x] Fix crash: beginVerification null check operator (GHI #680) https://github.com/commetchat/commet/issues/680
- [ ] Fix “Unable to verify sessions from Android only” (GHI #380) https://github.com/commetchat/commet/issues/380
- [x] Add clear UX feedback for unverified sessions (GHI #101) https://github.com/commetchat/commet/issues/101
- [ ] Add manual key import/export (GHI #631) https://github.com/commetchat/commet/issues/631
  - [ ] Export encrypted backup file w/ passphrase + QR option
  - [ ] Import flow with validation + “dry run” (what will be restored)
  - [ ] Add “you will lose access to old messages if…” warnings

## Crashes / corruption / startup blockers (P0)
- [ ] Fix crash/out-of-memory leading to DB corruption (GHI #296) https://github.com/commetchat/commet/issues/296
  - [ ] Add DB integrity checks + auto-repair / safe reset options
  - [ ] Reduce peak memory (timeline virtualization, image cache caps)
  - [x] Cap Flutter in-memory image cache to reduce memory spikes
  - [x] Complete additional timeline virtualization reductions
  - [ ] Add watchdog to prevent “corrupt on crash” write patterns
- [x] Fix Windows startup freeze if temp folder exists (GHI #674) https://github.com/commetchat/commet/issues/674
- [x] Ship libcrypto.dll in Windows installer (GHI #672) https://github.com/commetchat/commet/issues/672
- [x] Fix auth webview crash on KDE + Nvidia (GHI #640) https://github.com/commetchat/commet/issues/640
  - [x] Apply Linux Wayland+Nvidia env workaround (`__NV_DISABLE_EXPLICIT_SYNC=1`) when unset, preserving user overrides

## Core navigation reliability (P0)
- [x] Fix notifications opening wrong room (GHI #591) https://github.com/commetchat/commet/issues/591
- [x] Fix “Open whole space instead of subspace from notification” (GHI #383) https://github.com/commetchat/commet/issues/383

===========================================================
P1 — Calls, streaming, and Discord-level real-time features
===========================================================

## Calls / voice / SS (P1, some P0)
- [ ] Fix app freeze when first enabling webcam (GHI #670) https://github.com/commetchat/commet/issues/670
- [x] Fix voice channel default permissions (“moderator only” bug) (GHI #628) https://github.com/commetchat/commet/issues/628
- [ ] Implement/track Element Call integration (GHI #450) https://github.com/commetchat/commet/issues/450
  - [ ] Use it as the path to reliable group calls + better SS + scalability
- [ ] (NEW) Fix SS low framerate + add SS audio
  - [ ] Desktop SS: add FPS/resolution/bitrate controls + adaptive bitrate
  - [ ] SS audio: implement system-audio capture/loopback (platform-specific)
  - [ ] Add “SS quality presets” (Auto / Smooth / Low CPU / Low bandwidth)
  - [ ] Measure + expose pipeline stats (encode fps, dropped frames, RTT, loss)
- [x] Fix error propagation in LiveKit backend (GHI #699) https://github.com/commetchat/commet/issues/699
- [ ] Improve audio stack: VAD / auto mic threshold / noise suppression (GHI #603) https://github.com/commetchat/commet/issues/603
  - [ ] Optional AGC + RNNoise/WebRTC NS toggles
  - [ ] Per-device input selection + test meter
- [ ] Add voice note support (GHI #397) https://github.com/commetchat/commet/issues/397

## DP gaps in calling (create issues)
- [ ] (NEW / DP) Push-to-talk + global hotkeys + per-server keybinds
- [ ] (NEW / DP) Better call UX: overlay, participant list, quick mute/deafen
- [ ] (NEW / DP) Stage-like rooms / speaker requests (if desired in Matrix terms)
- [ ] (NEW / DP) Streaming safety: “don’t stream audio unless enabled”, indicators

===========================================================
P1 — Messaging UX, search, and productivity (DP)
===========================================================

## DM / navigation / reading state (P1)
- [x] Start new DMs with user search / username input (GHI #691) https://github.com/commetchat/commet/issues/691
  - [x] Added username/user-id input flow from DM list (opens/creates DM)
  - [x] Added user directory search/picker UI
- [x] Ability to mark a message as last read (GHI #671) https://github.com/commetchat/commet/issues/671
- [x] Allow searching for rooms (GHI #131) https://github.com/commetchat/commet/issues/131

## Input / message controls (P1)
- [x] Up arrow to edit last message (GHI #600) https://github.com/commetchat/commet/issues/600
- [x] “Delete without confirmation” option (GHI #639) https://github.com/commetchat/commet/issues/639
- [x] Added setting to ask before deleting messages (GHI #661) https://github.com/commetchat/commet/issues/661
- [x] Highlight @room mentions (GHI #592) https://github.com/commetchat/commet/issues/592
- [x] Collapse membership/state spam in rooms (GHI #598) https://github.com/commetchat/commet/issues/598
- [x] Fix duplicate DM entries after room upgrades (GHI #597) https://github.com/commetchat/commet/issues/597
- [x] Allow custom state events (GHI #589) https://github.com/commetchat/commet/issues/589
- [x] Disable auto-playing animated media (GHI #588) https://github.com/commetchat/commet/issues/588
- [x] Fix .svg profile picture not showing (GHI #576) https://github.com/commetchat/commet/issues/576

## Polls (P1)
- [x] Support polls using MSC3381 (GHI #601) https://github.com/commetchat/commet/issues/601
  - [x] Add timeline support for poll start/response/end events (stable + unstable event types)

## Timeline performance / polish (P1)
- [x] Prevent unnecessary re-evaluation of room fields (GHI #693) https://github.com/commetchat/commet/issues/693
- [ ] Timeline UX megathread improvements (GHI #2) https://github.com/commetchat/commet/issues/2
  - [x] Smooth scroll toggle, virtualization improvements, etc. (implemented smooth scroll toggle; added timeline cache-extent tuning; deeper virtualization improvements pending)

===========================================================
P1 — Spaces/servers, permissions, and moderation (DP)
===========================================================

## Spaces/rooms correctness (P1)
- [x] Fix newly created spaces named “Empty Chat” with no topic (GHI #664) https://github.com/commetchat/commet/issues/664
- [x] Fix misleading space notifications option (GHI #678) https://github.com/commetchat/commet/issues/678
- [x] Restricted room support (GHI #627) https://github.com/commetchat/commet/issues/627
  - [x] Add restricted-visibility mapping for joined rooms/spaces and room previews (visibility + lock icon handling)
  - [x] Add room creation flow for restricted rooms (including join-rule editing UI in room settings)

## DP gaps (create issues)
- [ ] (NEW / DP) Roles/permissions UI comparable to Discord roles/channel perms
- [ ] (NEW / DP) Moderation tools: timeouts, quick ban/kick, audit log view
- [ ] (NEW / DP) Better server discovery / invite UX / onboarding flows
- [ ] (NEW / DP) “Forum-like” channels / topic threads (if desired)

===========================================================
P1 — Matrix onboarding, federation, and “setup isn’t a hobby”
===========================================================

## Better MHS onboarding (P1)
- [x] Show helpful error when MHS does not exist (GHI #405) https://github.com/commetchat/commet/issues/405
- [x] Improve invalid login error UX (GHI #404) https://github.com/commetchat/commet/issues/404
- [x] Login screen input validation (no spaces, case rules, etc.) (GHI #117) https://github.com/commetchat/commet/issues/117

## “Autodeploy Matrix” (P1) — reduce the Matrix setup pain (your request)
- [x] (NEW) Publish “Commet Federation Kit” (CFK): an opinionated, single-command deploy for a production-grade MHS
  - [x] Provide Docker Compose + docs (Synapse OR Dendrite/Conduit), Postgres, reverse proxy w/ ACME TLS
  - [x] Include federation-ready defaults + .well-known templates
  - [x] Include TURN (coturn) pre-config for calls/SS
  - [x] Provide healthchecks + monitoring hooks (Prometheus/Grafana optional)
  - [x] Add a “bring your own domain” wizard script + idempotent upgrades
  - [x] Provide “non-federated/simple mode” for people who just want a private server fast
  - [x] Provide a “recommended ports + firewall rules” checklist
  - [x] Add a “quick troubleshoot” command that bundles sanitized logs

===========================================================
P1/P2 — Platform support, packaging, and distribution
===========================================================

## Missing apps (DP) — macOS / iOS (your request)
- [ ] (NEW / DP) macOS app: signed build + updater + Apple silicon testing
- [ ] (NEW / DP) iOS app: push notifications, call integration, background behavior
  - [ ] Ensure E2EE + verification UX works well on mobile
  - [ ] Ensure SS/calls behave under iOS constraints

## Linux packaging + distro ergonomics (P1)
- [x] Trouble installing .deb on KDE Ubuntu (GHI #684) https://github.com/commetchat/commet/issues/684
- [x] Fix .deb landing in filesystem root (GHI #575) https://github.com/commetchat/commet/issues/575
- [ ] Request AUR package (GHI #357) https://github.com/commetchat/commet/issues/357
  - [x] Add maintained `commet-bin` AUR packaging files (`PKGBUILD` + `.SRCINFO`) in-repo
  - [x] Add helper script to bump pkgver and regenerate `.SRCINFO`
  - [x] Add clean-Arch container verification script for `commet-bin` packaging (`commet/scripts/verify_aur_package_in_arch_container.sh`)
  - [ ] Publish/update `commet-bin` in AUR and verify install on clean Arch environment
- [x] Debian ARM64 support (GHI #371) https://github.com/commetchat/commet/issues/371
- [ ] Add to F-Droid (GHI #115) https://github.com/commetchat/commet/issues/115
  - [x] Add F-Droid build helper script (`BUILD_DETAIL=fdroid`) and project notes/checklist
  - [ ] Submit/update upstream F-Droid metadata PR and track acceptance
- [x] Docker image for web client container story (GHI #635) https://github.com/commetchat/commet/issues/635

## Desktop QoL (P2)
- [x] Change language on desktop client (GHI #641) https://github.com/commetchat/commet/issues/641
- [x] Minimize to tray (GHI #72) https://github.com/commetchat/commet/issues/72
- [x] Use native titlebar on Linux (GHI #392) https://github.com/commetchat/commet/issues/392
- [x] Store logs to file (GHI #389) https://github.com/commetchat/commet/issues/389
- [x] PWA icon dark variant (Chromebooks) (GHI #398) https://github.com/commetchat/commet/issues/398

===========================================================
P2 — Accessibility, notifications tuning, and calendar
===========================================================

## Accessibility (P2, but important)
- [x] Fix screen readers not reading space names (GHI #384) https://github.com/commetchat/commet/issues/384

## Links / basic OS integration (P1)
- [x] Fix links not opening in browser/apps (GHI #637) https://github.com/commetchat/commet/issues/637

## Calendar (P2)
- [x] Fix all-day events saved one day off when updating (GHI #633) https://github.com/commetchat/commet/issues/633
- [ ] Calendar-integrated availability / ready-up system (GHI #626) https://github.com/commetchat/commet/issues/626
- [x] Incorporate Linux Flatpak feedback (GHI #632) https://github.com/commetchat/commet/issues/632
  - [x] Allow dismissing image lightbox with Escape
  - [x] Add left/right arrow navigation when viewing images
  - [x] Investigate and fix reported device-verification UX gaps on Linux/Flatpak (added robust retry for verification/auth dialog display when navigator context is not ready)
  - [x] Reduce oversized space avatars in side navigation for better scaling on Linux/Flatpak
